!function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],h=0,f=[];h<s.length;h++)a=s[h],i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={2:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,r){n=i[t]=[e,r]});e.push(n[2]=r);var o,s=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=function(t){return a.p+"js/legacy."+({0:"block-0",1:"block-2"}[t]||t)+".js"}(t),o=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+r+": "+o+")");a.type=r,a.request=o,n[1](a)}i[t]=void 0}};var u=setTimeout(function(){o({type:"timeout",target:c})},12e4);c.onerror=c.onload=o,s.appendChild(c)}return Promise.all(e)},a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([96,3]),n()}({146:function(t,e,n){var r={"./DefaultBlock":[94,0],"./DefaultBlock.js":[94,0],"./UsersBlock":[95,1],"./UsersBlock.js":[95,1]};function i(t){var e=r[t];return e?n.e(e[1]).then(function(){var t=e[0];return n(t)}):Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}i.keys=function(){return Object.keys(r)},i.id=146,t.exports=i},151:function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(36),o=n.n(i),a=(n(89),n(61)),s=n.n(a),c=n(7),u=n.n(c),l=n(9),h=n.n(l),f=(n(26),n(15)),d=n.n(f),p=n(3),v=n.n(p),y=n(21),g=n.n(y),m=n(16),w=n.n(m),b=function(t){function e(){return u()(this,e),d()(this,v()(e).apply(this,arguments))}return w()(e,t),h()(e,[{key:"init",value:function(){g()(v()(e.prototype),"init",this).call(this),this.duplicateButtonElement=this.container.querySelectorAll("a.duplicate-last")[0],this.onButtonClick=this.onButtonClick.bind(this)}},{key:"initEvents",value:function(){g()(v()(e.prototype),"initEvents",this).call(this),this.duplicateButtonElement&&this.duplicateButtonElement.addEventListener("click",this.onButtonClick)}},{key:"destroyEvents",value:function(){g()(v()(e.prototype),"destroyEvents",this).call(this),this.duplicateButtonElement&&this.duplicateButtonElement.removeEventListener("click",this.onButtonClick)}},{key:"onButtonClick",value:function(t){t.preventDefault();var e=this.blockElements[this.blockElements.length-1].cloneNode(!0);return e.setAttribute("id","block-".concat(this.blockElements.length+1)),this.container.appendChild(e),!1}},{key:"onLazyImageProcessed",value:function(t){g()(v()(e.prototype),"onLazyImageProcessed",this).call(this,t)}},{key:"onResize",value:function(){g()(v()(e.prototype),"onResize",this).call(this)}},{key:"onLazyImageSet",value:function(t){g()(v()(e.prototype),"onLazyImageSet",this).call(this,t)}},{key:"onLazyImageLoad",value:function(t){g()(v()(e.prototype),"onLazyImageLoad",this).call(this,t)}}]),e}(r.b),k=function(t){function e(){return u()(this,e),d()(this,v()(e).apply(this,arguments))}return w()(e,t),e}(r.b),_=function(){function t(){u()(this,t)}return h()(t,[{key:"getPageInstance",value:function(t,e,n,r){switch(r){case"home":return console.debug("Create new home"),new k(t,e,n,r);default:return console.info('"'.concat(r,'" has no defined route, using Page.')),new b(t,e,n,r)}}},{key:"getBlockInstance",value:function(){var t=s()(o.a.mark(function t(e,n,r){var i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getModule(r);case 3:return i=t.sent,t.abrupt("return",new i(e,n,r));case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0.message);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getModule",value:function(){var t=s()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(146)("./".concat(e)).then(function(t){return t.default}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),E=(n(38),n(27),n(28),n(43),n(0)),P=function(t){function e(){return u()(this,e),d()(this,v()(e).apply(this,arguments))}return w()(e,t),h()(e,[{key:"start",value:function(){Promise.all([this.newPageLoading,this.fadeOut()]).then(this.fadeIn.bind(this))}},{key:"fadeOut",value:function(){var t=this;return new Promise(function(e){E.g.to(t.oldPage.container,.4,{alpha:0,onComplete:e})})}},{key:"fadeIn",value:function(){var t=this;this.oldPage.container.style.display="none",this.newPage.container.style.visibility="visible",this.newPage.container.style.opacity="0",this.newPage.updateLazyload(),document.documentElement.scrollTop=0,document.body.scrollTop=0,E.g.to(this.newPage.container,.4,{alpha:1,onComplete:function(){t.done()}})}}]),e}(r.c),L=function(t){function e(){return u()(this,e),d()(this,v()(e).apply(this,arguments))}return w()(e,t),h()(e,[{key:"start",value:function(){Promise.all([this.newPageLoading,this.slideOut()]).then(this.slideIn.bind(this))}},{key:"slideOut",value:function(){var t=this;return new Promise(function(e){E.g.to(t.oldPage.container,.5,{xPercent:25,alpha:0,ease:E.c.easeIn,onComplete:e})})}},{key:"slideIn",value:function(){var t=this;E.g.set(this.oldPage.container,{display:"none"}),E.g.set(this.newPage.container,{visibility:"visible",alpha:0,xPercent:-25}),document.documentElement.scrollTop=0,document.body.scrollTop=0,this.newPage.updateLazyload(),E.g.to(this.newPage.container,.75,{xPercent:0,alpha:1,ease:E.c.easeOut,onComplete:function(){t.done()}})}}]),e}(r.c),x=n(37),A=n.n(x),S=n(18),T=function(t){function e(){var t;return u()(this,e),(t=d()(this,v()(e).call(this))).mainElement=document.getElementById("big-transition"),t.verticalElements=A()(document.getElementById("big-transition-vertical").querySelectorAll("div")),t.horizontalElements=A()(document.getElementById("big-transition-horizontal").querySelectorAll("div")),t}return w()(e,t),h()(e,[{key:"start",value:function(){Promise.all([this.newPageLoading,this.startAnim()]).then(this.endAnim.bind(this))}},{key:"startAnim",value:function(){var t=this;return new Promise(function(e){S.a.to(t.oldPage.container,.75,{alpha:0}),S.a.set(t.mainElement,{autoAlpha:1,onComplete:function(){S.a.staggerTo(t.horizontalElements,.5,{scaleX:1},.1),S.a.staggerTo(t.verticalElements.reverse(),.5,{scaleY:1},.1,e)}})})}},{key:"endAnim",value:function(){var t=this;this.oldPage.container.style.display="none",this.newPage.container.style.visibility="visible",this.newPage.container.style.opacity="0",this.newPage.updateLazyload(),document.documentElement.scrollTop=0,document.body.scrollTop=0,S.a.to(this.newPage.container,.75,{alpha:1}),S.a.staggerTo(this.horizontalElements,.5,{scaleX:0},.1),S.a.staggerTo(this.verticalElements,.5,{scaleY:0},.1,function(){S.a.set(t.mainElement,{autoAlpha:0}),t.done()})}}]),e}(r.c),O=function(){function t(){u()(this,t)}return h()(t,[{key:"getTransition",value:function(t,e){if(e&&"history"===e.context)return new P;var n;switch(e.transitionName){case"slide":n=new L;break;case"fade":n=new P;break;default:n=new T}return n}}]),t}(),j=(n(62),n(63),function(){function t(){u()(this,t),this.container=document.getElementById("main-nav"),this.linkElements=A()(this.container.querySelectorAll("a")),this.onAfterPageBoot=this.onAfterPageBoot.bind(this)}return h()(t,[{key:"init",value:function(){this.initEvents()}},{key:"initEvents",value:function(){window.addEventListener(r.e.AFTER_PAGE_BOOT,this.onAfterPageBoot)}},{key:"onAfterPageBoot",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.linkElements[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.classList.remove("active"),o.href===window.location.href&&o.classList.add("active")}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}]),t}());if(window.MAIN_EXECUTED)throw new Error("Safari 10");window.MAIN_EXECUTED=!0,Object(r.j)();var I=new j,C=new r.g({services:{pjax:new r.h,cacheProvider:new r.d,prefetch:new r.i,lazyload:null,worker:null,graphicLoader:new r.f,classFactory:new _,transitionFactory:new O},options:{}});I.init(),C.init()},2:function(t,e,n){"use strict";n.d(e,"e",function(){return o}),n.d(e,"g",function(){return Y}),n.d(e,"h",function(){return ln}),n.d(e,"i",function(){return hn}),n.d(e,"d",function(){return fn}),n.d(e,"f",function(){return dn}),n.d(e,"b",function(){return Sn}),n.d(e,"a",function(){return An}),n.d(e,"c",function(){return Tn}),n.d(e,"j",function(){return dr});n(101),n(104),n(43),n(109),n(111),n(62),n(63),n(38),n(122),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(90),n(133),n(27),n(28),n(91),n(26),n(136),n(137),n(92),n(93),n(139);var r=n(17),i=n.n(r),o=(n(140),Object.freeze({BEFORE_PAGE_LOAD:"SB_BEFORE_PAGE_LOAD",AFTER_PAGE_LOAD:"SB_AFTER_PAGE_LOAD",AFTER_DOM_APPENDED:"SB_AFTER_DOM_APPENDED",CONTAINER_READY:"SB_CONTAINER_READY",AFTER_PAGE_BOOT:"SB_AFTER_PAGE_BOOT",BEFORE_PAGE_SHOW:"SB_BEFORE_PAGE_SHOW",AFTER_PAGE_SHOW:"SB_AFTER_PAGE_SHOW",BEFORE_PAGE_HIDE:"SB_BEFORE_PAGE_HIDE",AFTER_PAGE_HIDE:"SB_AFTER_PAGE_HIDE",TRANSITION_START:"SB_TRANSITION_START",TRANSITION_COMPLETE:"SB_TRANSITION_COMPLETE"}));function a(t,e){return t(e={exports:{}},e.exports),e.exports}var s=a(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),c=a(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),u=(c.version,function(t){return"object"===i()(t)?null!==t:"function"==typeof t}),l=function(t){if(!u(t))throw TypeError(t+" is not an object!");return t},h=function(t){try{return!!t()}catch(t){return!0}},f=!h(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d=s.document,p=u(d)&&u(d.createElement),v=function(t){return p?d.createElement(t):{}},y=!f&&!h(function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a}),g=function(t,e){if(!u(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!u(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m=Object.defineProperty,w={f:f?Object.defineProperty:function(t,e,n){if(l(t),e=g(e,!0),l(n),y)try{return m(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},k=f?function(t,e,n){return w.f(t,e,b(1,n))}:function(t,e,n){return t[e]=n,t},_={}.hasOwnProperty,E=function(t,e){return _.call(t,e)},P=0,L=Math.random(),x=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++P+L).toString(36))},A=a(function(t){var e=x("src"),n=Function.toString,r=(""+n).split("toString");c.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,i,o){var a="function"==typeof i;a&&(E(i,"name")||k(i,"name",n)),t[n]!==i&&(a&&(E(i,e)||k(i,e,t[n]?""+t[n]:r.join(String(n)))),t===s?t[n]=i:o?t[n]?t[n]=i:k(t,n,i):(delete t[n],k(t,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),S=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},T=function(t,e,n){if(S(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},O=function t(e,n,r){var i,o,a,u,l=e&t.F,h=e&t.G,f=e&t.P,d=e&t.B,p=h?s:e&t.S?s[n]||(s[n]={}):(s[n]||{}).prototype,v=h?c:c[n]||(c[n]={}),y=v.prototype||(v.prototype={});for(i in h&&(r=n),r)a=((o=!l&&p&&void 0!==p[i])?p:r)[i],u=d&&o?T(a,s):f&&"function"==typeof a?T(Function.call,a):a,p&&A(p,i,a,e&t.U),v[i]!=a&&k(v,i,u),f&&y[i]!=a&&(y[i]=a)};s.core=c,O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var j=O,I=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},C=[].slice,R={},F=Function.bind||function(t){var e=S(this),n=C.call(arguments,1),r=function r(){var i=n.concat(C.call(arguments));return this instanceof r?function(t,e,n){if(!(e in R)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";R[e]=Function("F,a","return new F("+r.join(",")+")")}return R[e](t,n)}(e,i.length,i):I(e,i,t)};return u(e.prototype)&&(r.prototype=e.prototype),r};j(j.P,"Function",{bind:F});var B=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};var N=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){B(t,e,n[e])})}return t};var z=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var G=function(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),t},D=w.f,H=Function.prototype,U=/^\s*function ([^ (]*)/;"name"in H||f&&D(H,"name",{configurable:!0,get:function(){try{return(""+this).match(U)[1]}catch(t){return""}}});var q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.wrapperId,r=void 0===n?"sb-wrapper":n,i=e.objectTypeAttr,o=void 0===i?"data-node-type":i,a=e.pageClass,s=void 0===a?"page-content":a;z(this,t),this.wrapperId=r,this.objectTypeAttr=o,this.pageClass=s,this.currentHTML=document.documentElement.innerHTML}return G(t,[{key:"parseResponse",value:function(t){this.currentHTML=t;var e=document.createElement("div");return e.innerHTML=t,this.getContainer(e)}},{key:"getWrapper",value:function(){var t=document.getElementById(this.wrapperId);if(!t)throw new Error("Starting Blocks: Wrapper not found!");return t}},{key:"getNodeType",value:function(t){return t.getAttribute(this.objectTypeAttr)}},{key:"getContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t||(t=document.body),!t)throw new Error("Starting Blocks: DOM not ready!");var e=this.parseContainer(t);if(!e)throw new Error('Starting Blocks: container not found! Did you use at least\n            one dom element with ".'.concat(this.pageClass,'" class and "data-node-type" attribute?'));return e}},{key:"putContainer",value:function(t){t.style.visibility="hidden",this.getWrapper().appendChild(t)}},{key:"parseContainer",value:function(t){return t.querySelector(".".concat(this.pageClass,"[data-node-type]"))}},{key:"updateBodyAttributes",value:function(t){t.name&&(document.body.id=t.name,document.body.classList.add(t.name)),document.body.classList.add(t.type),t.isHome?document.body.setAttribute("data-is-home","1"):document.body.setAttribute("data-is-home","0")}},{key:"updatePageTitle",value:function(t){t.metaTitle&&(document.title=t.metaTitle)}}]),t}(),W=function(){function t(){z(this,t)}return G(t,null,[{key:"commit",value:function(t,e){var n=new window.CustomEvent(t,{detail:e});console.debug("🚩 Dispatched "+t),window.dispatchEvent(n)}}]),t}(),V={pageClass:"page-content",pageBlockClass:"page-block",objectTypeAttr:"data-node-type",ajaxWrapperId:"sb-wrapper",noAjaxLinkClass:"no-ajax-link",noPrefetchLinkClass:"no-prefetch"},Y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.services,r=void 0===n?{}:n,i=e.options,o=void 0===i?{}:i;z(this,t),this.options=N({},V,o),this.pjax=r.pjax||null,this.cacheProvider=r.cacheProvider||null,this.prefetch=r.prefetch||null,this.lazyload=r.lazyload||null,this.worker=r.worker||null,this.graphicLoader=r.graphicLoader||null,this.classFactory=r.classFactory||null,this.transitionFactory=r.transitionFactory||null,window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host),this.baseUrl=window.location.origin,this.page=null,this.dom=null,this.buildPage=this.buildPage.bind(this)}return G(t,[{key:"init",value:function(){this.dom=new q({wrapperId:this.options.ajaxWrapperId,objectTypeAttr:this.options.objectTypeAttr,pageClass:this.options.pageClass}),this.pjax&&window.fetch&&(this.cacheProvider&&(this.pjax.cacheProvider=this.cacheProvider),this.worker&&(this.pjax.worker=this.worker),this.transitionFactory&&(this.pjax.transitionFactory=this.transitionFactory),this.pjax.kernel=this,this.pjax.dom=this.dom,this.pjax.init(),this.prefetch&&(this.prefetch.cacheProvider=this.cacheProvider,this.prefetch.pjax=this.pjax,this.prefetch.init())),this.buildPage(this.dom.getContainer(),"static")}},{key:"buildPage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ajax";if(!t)throw new Error('Kernel: container not found! Did you use at least \n            one dom element with ".'.concat(this.options.pageClass,'" class and "data-node-type" attribute'));return this.page=this.classFactory.getPageInstance(this,t,e,this.dom.getNodeType(t)),this.page.init(),W.commit("SB_AFTER_PAGE_BOOT",this.page),this.page}}]),t}(),X=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},K=a(function(t){var e=s["__core-js_shared__"]||(s["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:c.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),J=a(function(t){var e=K("wks"),n=s.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:x)("Symbol."+t))}).store=e}),$=function(t,e,n){var r=J(t),i=n(X,r,""[t]),o=i[0],a=i[1];h(function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})&&(A(String.prototype,t,o),k(RegExp.prototype,r,2==e?function(t,e){return a.call(t,this,e)}:function(t){return a.call(t,this)}))},Q={}.toString,Z=function(t){return Q.call(t).slice(8,-1)},tt=J("match"),et=function(t){var e;return u(t)&&(void 0!==(e=t[tt])?!!e:"RegExp"==Z(t))};$("split",2,function(t,e,n){var r=et,i=n,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];n=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return i.call(n,t,e);var s,c,u,l,h,f=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,d+"g");for(a||(s=new RegExp("^"+y.source+"$(?!\\s)",d));(c=y.exec(n))&&!((u=c.index+c[0].length)>p&&(f.push(n.slice(p,c.index)),!a&&c.length>1&&c[0].replace(s,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(c[h]=void 0)}),c.length>1&&c.index<n.length&&o.apply(f,c.slice(1)),l=c[0].length,p=u,f.length>=v));)y.lastIndex===c.index&&y.lastIndex++;return p===n.length?!l&&y.test("")||f.push(""):f.push(n.slice(p)),f.length>v?f.slice(0,v):f}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(r,i){var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]});var nt,rt,it,ot=J("toStringTag"),at="Arguments"==Z(function(){return arguments}()),st=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ot))?n:at?Z(e):"Object"==(r=Z(e))&&"function"==typeof e.callee?"Arguments":r},ct=function(t,e,n,r){try{return r?e(l(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&l(i.call(t)),e}},ut={},lt=J("iterator"),ht=Array.prototype,ft=function(t){return void 0!==t&&(ut.Array===t||ht[lt]===t)},dt=Math.ceil,pt=Math.floor,vt=function(t){return isNaN(t=+t)?0:(t>0?pt:dt)(t)},yt=Math.min,gt=function(t){return t>0?yt(vt(t),9007199254740991):0},mt=J("iterator"),wt=c.getIteratorMethod=function(t){if(void 0!=t)return t[mt]||t["@@iterator"]||ut[st(t)]},bt=a(function(t){var e={},n={},r=t.exports=function(t,r,i,o,a){var s,c,u,h,f=a?function(){return t}:wt(t),d=T(i,o,r?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(ft(f)){for(s=gt(t.length);s>p;p++)if((h=r?d(l(c=t[p])[0],c[1]):d(t[p]))===e||h===n)return h}else for(u=f.call(t);!(c=u.next()).done;)if((h=ct(u,d,c.value,r))===e||h===n)return h};r.BREAK=e,r.RETURN=n}),kt=J("species"),_t=s.document,Et=_t&&_t.documentElement,Pt=s.process,Lt=s.setImmediate,xt=s.clearImmediate,At=s.MessageChannel,St=s.Dispatch,Tt=0,Ot={},jt=function(){var t=+this;if(Ot.hasOwnProperty(t)){var e=Ot[t];delete Ot[t],e()}},It=function(t){jt.call(t.data)};Lt&&xt||(Lt=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Ot[++Tt]=function(){I("function"==typeof t?t:Function(t),e)},nt(Tt),Tt},xt=function(t){delete Ot[t]},"process"==Z(Pt)?nt=function(t){Pt.nextTick(T(jt,t,1))}:St&&St.now?nt=function(t){St.now(T(jt,t,1))}:At?(it=(rt=new At).port2,rt.port1.onmessage=It,nt=T(it.postMessage,it,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(nt=function(t){s.postMessage(t+"","*")},s.addEventListener("message",It,!1)):nt="onreadystatechange"in v("script")?function(t){Et.appendChild(v("script")).onreadystatechange=function(){Et.removeChild(this),jt.call(t)}}:function(t){setTimeout(T(jt,t,1),0)});var Ct={set:Lt,clear:xt},Rt=Ct.set,Ft=s.MutationObserver||s.WebKitMutationObserver,Bt=s.process,Nt=s.Promise,zt="process"==Z(Bt);var Mt={f:function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=S(e),this.reject=S(n)}(t)}},Gt=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Dt=s.navigator,Ht=Dt&&Dt.userAgent||"",Ut=w.f,qt=J("toStringTag"),Wt=function(t,e,n){t&&!E(t=n?t:t.prototype,qt)&&Ut(t,qt,{configurable:!0,value:e})},Vt=J("species"),Yt=J("iterator"),Xt=!1;try{[7][Yt]().return=function(){Xt=!0}}catch(t){}var Kt,Jt,$t,Qt,Zt=function(t,e){if(!e&&!Xt)return!1;var n=!1;try{var r=[7],i=r[Yt]();i.next=function(){return{done:n=!0}},r[Yt]=function(){return i},t(r)}catch(t){}return n},te=Ct.set,ee=function(){var t,e,n,r=function(){var r,i;for(zt&&(r=Bt.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(zt)n=function(){Bt.nextTick(r)};else if(!Ft||s.navigator&&s.navigator.standalone)if(Nt&&Nt.resolve){var i=Nt.resolve(void 0);n=function(){i.then(r)}}else n=function(){Rt.call(s,r)};else{var o=!0,a=document.createTextNode("");new Ft(r).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),ne=s.TypeError,re=s.process,ie=re&&re.versions,oe=ie&&ie.v8||"",ae=s.Promise,se="process"==st(re),ce=function(){},ue=Jt=Mt.f,le=!!function(){try{var t=ae.resolve(1),e=(t.constructor={})[J("species")]=function(t){t(ce,ce)};return(se||"function"==typeof PromiseRejectionEvent)&&t.then(ce)instanceof e&&0!==oe.indexOf("6.6")&&-1===Ht.indexOf("Chrome/66")}catch(t){}}(),he=function(t){var e;return!(!u(t)||"function"!=typeof(e=t.then))&&e},fe=function(t,e){if(!t._n){t._n=!0;var n=t._c;ee(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(i||(2==t._h&&ve(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?u(ne("Promise-chain cycle")):(o=he(n))?o.call(n,c,u):c(n)):u(r)}catch(t){l&&!a&&l.exit(),u(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&de(t)})}},de=function(t){te.call(s,function(){var e,n,r,i=t._v,o=pe(t);if(o&&(e=Gt(function(){se?re.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=se||pe(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},pe=function(t){return 1!==t._h&&0===(t._a||t._c).length},ve=function(t){te.call(s,function(){var e;se?re.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},ye=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),fe(e,!0))},ge=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw ne("Promise can't be resolved itself");(n=he(e))?ee(function(){var i={_w:r,_d:!1};try{n.call(e,T(t,i,1),T(ye,i,1))}catch(t){ye.call(i,t)}}):(r._v=e,r._s=1,fe(r,!1))}catch(t){ye.call({_w:r,_d:!1},t)}}};le||(ae=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,ae,"Promise","_h"),S(t),Kt.call(this);try{t(T(ge,this,1),T(ye,this,1))}catch(t){ye.call(this,t)}},(Kt=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)A(t,r,e[r],n);return t}(ae.prototype,{then:function(t,e){var n=ue(function(t,e){var n,r=l(t).constructor;return void 0===r||void 0==(n=l(r)[kt])?e:S(n)}(this,ae));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=se?re.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&fe(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),$t=function(){var t=new Kt;this.promise=t,this.resolve=T(ge,t,1),this.reject=T(ye,t,1)},Mt.f=ue=function(t){return t===ae||t===Qt?new $t(t):Jt(t)}),j(j.G+j.W+j.F*!le,{Promise:ae}),Wt(ae,"Promise"),function(t){var e=s[t];f&&e&&!e[Vt]&&w.f(e,Vt,{configurable:!0,get:function(){return this}})}("Promise"),Qt=c.Promise,j(j.S+j.F*!le,"Promise",{reject:function(t){var e=ue(this);return(0,e.reject)(t),e.promise}}),j(j.S+j.F*!le,"Promise",{resolve:function(t){return function(t,e){if(l(t),u(e)&&e.constructor===t)return e;var n=Mt.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),j(j.S+j.F*!(le&&Zt(function(t){ae.all(t).catch(ce)})),"Promise",{all:function(t){var e=this,n=ue(e),r=n.resolve,i=n.reject,o=Gt(function(){var n=[],o=0,a=1;bt(t,!1,function(t){var s=o++,c=!1;n.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=ue(e),r=n.reject,i=Gt(function(){bt(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}});var me={f:{}.propertyIsEnumerable},we=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Z(t)?t.split(""):Object(t)},be=function(t){return we(X(t))},ke=Object.getOwnPropertyDescriptor,_e={f:f?ke:function(t,e){if(t=be(t),e=g(e,!0),y)try{return ke(t,e)}catch(t){}if(E(t,e))return b(!me.f.call(t,e),t[e])}},Ee=function(t,e){if(l(t),!u(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Pe={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=T(Function.call,_e.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return Ee(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:Ee}.set,Le=Math.max,xe=Math.min,Ae=K("keys"),Se=function(t){return Ae[t]||(Ae[t]=x(t))},Te=function(t){return function(e,n,r){var i,o=be(e),a=gt(o.length),s=function(t,e){return(t=vt(t))<0?Le(t+e,0):xe(t,e)}(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}}(!1),Oe=Se("IE_PROTO"),je=function(t,e){var n,r=be(t),i=0,o=[];for(n in r)n!=Oe&&E(r,n)&&o.push(n);for(;e.length>i;)E(r,n=e[i++])&&(~Te(o,n)||o.push(n));return o},Ie="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Ce=Ie.concat("length","prototype"),Re={f:Object.getOwnPropertyNames||function(t){return je(t,Ce)}},Fe="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Be="["+Fe+"]",Ne=RegExp("^"+Be+Be+"*"),ze=RegExp(Be+Be+"*$"),Me=function(t,e,n){var r={},i=h(function(){return!!Fe[t]()||"​"!="​"[t]()}),o=r[t]=i?e(Ge):Fe[t];n&&(r[n]=o),j(j.P+j.F*i,"String",r)},Ge=Me.trim=function(t,e){return t=String(X(t)),1&e&&(t=t.replace(Ne,"")),2&e&&(t=t.replace(ze,"")),t},De=Me,He=Object.keys||function(t){return je(t,Ie)},Ue=f?Object.defineProperties:function(t,e){l(t);for(var n,r=He(e),i=r.length,o=0;i>o;)w.f(t,n=r[o++],e[n]);return t},qe=Se("IE_PROTO"),We=function(){},Ve=function(){var t,e=v("iframe"),n=Ie.length;for(e.style.display="none",Et.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ve=t.F;n--;)delete Ve.prototype[Ie[n]];return Ve()},Ye=Object.create||function(t,e){var n;return null!==t?(We.prototype=l(t),n=new We,We.prototype=null,n[qe]=t):n=Ve(),void 0===e?n:Ue(n,e)},Xe=Re.f,Ke=_e.f,Je=w.f,$e=De.trim,Qe=s.Number,Ze=Qe,tn=Qe.prototype,en="Number"==Z(Ye(tn)),nn="trim"in String.prototype,rn=function(t){var e=g(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=nn?e.trim():$e(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),c=0,u=s.length;c<u;c++)if((a=s.charCodeAt(c))<48||a>i)return NaN;return parseInt(s,r)}}return+e};if(!Qe(" 0o1")||!Qe("0b1")||Qe("+0x1")){Qe=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Qe&&(en?h(function(){tn.valueOf.call(n)}):"Number"!=Z(n))?function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&u(r)&&Pe&&Pe(t,r),t}(new Ze(rn(e)),n,Qe):rn(e)};for(var on,an=f?Xe(Ze):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),sn=0;an.length>sn;sn++)E(Ze,on=an[sn])&&!E(Qe,on)&&Je(Qe,on,Ke(Ze,on));Qe.prototype=tn,tn.constructor=Qe,A(s,"Number",Qe)}$("search",1,function(t,e,n){return[function(n){var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]}),$("replace",2,function(t,e,n){return[function(r,i){var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]});var cn=function(){function t(){z(this,t)}return G(t,null,[{key:"stripTrailingSlash",value:function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t}},{key:"getPort",value:function(t){var e=void 0!==t?t:window.location.port,n=window.location.protocol;return""!==e?parseInt(e):"http:"===n?80:"https:"===n?443:void 0}},{key:"cleanLink",value:function(t){return t.replace(/#.*/,"")}},{key:"getCurrentUrl",value:function(){return window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search}},{key:"requestTimeout",value:function(){return 1e4}},{key:"request",value:function(e,n){var r=t.deferred(),i=window.setTimeout(function(){window.clearTimeout(i),r.reject("timeout!")},t.requestTimeout());if(window.Worker&&n);else{var o=new window.Headers;o.append("X-Starting-Blocks","yes"),o.append("X-Allow-Partial","yes"),o.append("X-Requested-With","XMLHttpRequest"),window.fetch(e,{method:"GET",headers:o,cache:"default",credentials:"same-origin"}).then(function(t){if(window.clearTimeout(i),t.status>=200&&t.status<300)return r.resolve(t.text());var e=new Error(t.statusText||t.status);return r.reject(e)}).catch(function(t){window.clearTimeout(i),r.reject(t)})}return r.promise}},{key:"logCredits",value:function(t,e,n,r,i){var o="#fff";if(void 0!==i&&(o=i),console.log("%c   ","font-size:3px;"),console.log("%c"+t,"background:"+e+"; color: "+o+"; font-size:14px; padding:5px 10px;"),console.log("%c   ","font-size:3px;"),null!==n){var a=n.length;if(a)for(var s=0;s<a;s++)console.log(n[s].name+" - "+n[s].website)}if(null!==r){var c=r.length;if(c){console.log("-"),console.log("Thanks to");for(var u=0;u<c;u++)console.log(r[u].name+" ("+r[u].website+")")}}console.log("-"),console.log(" ")}},{key:"getRandomNumber",value:function(t,e,n){var r=Math.random()*(e-t)+t;return void 0!==n?Number(r.toFixed(n)):r}},{key:"getRandomInt",value:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}},{key:"trackGoogleAnalytics",value:function(){void 0!==window.ga&&(console.debug("🚩 Push Analytics for: "+window.location.pathname),window.ga("send","pageview",{page:window.location.pathname,title:document.title}))}},{key:"getViewportSize",value:function(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t[e+"Width"],height:t[e+"Height"]}}},{key:"prefixProperty",value:function(t){for(var e=["","ms","Webkit","Moz","O"],n=e.length,r=document.createElement("div"),i=0;i<n;i++){var o=e[i],a=o+(t=""===o?t:t.charAt(0).toUpperCase()+t.substring(1).toLowerCase());if(void 0!==r.style[a])return a}}},{key:"getNormRatio",value:function(t,e,n){return t<e?0:t>n?1:t===n?1:(t-e)/(n-e)}},{key:"deferred",value:function(){return new function(){var t=this;this.resolve=null,this.reject=null,this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}}]),t}(),un=function(){function t(){z(this,t),this.history=[]}return G(t,[{key:"add",value:function(t,e,n){var r={url:t,transitionName:e,context:n,data:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}};return this.history.push(r),r}},{key:"currentStatus",value:function(){return this.history[this.history.length-1]}},{key:"prevStatus",value:function(){var t=this.history;return t.length<2?null:t[t.length-2]}}]),t}(),ln=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).noAjaxLinkClass,n=void 0===e?"no-ajax-link":e;z(this,t),this.noAjaxLinkClass=n,this._kernel=null,this._history=null,this._dom=null,this._cacheProvider=null,this._transitionFactory=null,this._graphicLoader=null,this._worker=null,this.transitionProgress=!1,this.onNewPageLoaded=this.onNewPageLoaded.bind(this),this.onTransitionEnd=this.onTransitionEnd.bind(this),this.onLinkClick=this.onLinkClick.bind(this),this.onStateChange=this.onStateChange.bind(this)}return G(t,[{key:"init",value:function(){this._history=new un,this._dom.getWrapper().setAttribute("aria-live","polite"),this.currentState=this._history.add(this.getCurrentUrl(),null,"static"),this.bindEvents()}},{key:"bindEvents",value:function(){document.addEventListener("click",this.onLinkClick),window.addEventListener("popstate",this.onStateChange)}},{key:"getCurrentUrl",value:function(){return cn.cleanLink(cn.getCurrentUrl())}},{key:"goTo",value:function(t,e){var n=window.scrollY;window.history.pushState(null,null,t),window.scrollTo(0,n),this.onStateChange(e,!0)}},{key:"forceGoTo",value:function(t){window.location=t}},{key:"load",value:function(t){var e=this,n=cn.deferred();this._graphicLoader&&this._graphicLoader.show();var r=null;return this._cacheProvider&&(r=this._cacheProvider.get(t)),r||(r=cn.request(t,this._worker),this._cacheProvider&&this._cacheProvider.set(t,r)),r.then(function(t){var r=e._dom.parseResponse(t);W.commit("SB_AFTER_PAGE_LOAD",{container:r,currentHTML:e._dom.currentHTML}),e._dom.putContainer(r),W.commit("SB_AFTER_DOM_APPENDED",{container:r,currentHTML:e._dom.currentHTML});var i=e._kernel.buildPage(r);n.resolve(i)}).catch(function(r){console.error(r),e.forceGoTo(t),n.reject()}),n.promise}},{key:"getHref",value:function(t){if(t)return"string"==typeof t.href&&"A"===t.tagName.toUpperCase()?t.href:void 0}},{key:"getTransitionName",value:function(t){return t&&t.getAttribute&&"string"==typeof t.getAttribute("data-transition")?t.getAttribute("data-transition"):null}},{key:"onLinkClick",value:function(t){for(var e=t.target;e&&!this.getHref(e);)e=e.parentNode;if(this.preventCheck(t,e)){t.preventDefault(),this.linkHash=e.hash.split("#")[1];var n=this.getHref(e),r=this.getTransitionName(e);this.goTo(n,r)}}},{key:"preventCheck",value:function(t,e){if(!window.history.pushState)return!1;var n=this.getHref(e);return!(!e||!n)&&(!(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)&&((!e.target||"_blank"!==e.target)&&(window.location.protocol===e.protocol&&window.location.hostname===e.hostname&&(cn.getPort()===cn.getPort(e.port)&&((!e.getAttribute||"string"!=typeof e.getAttribute("download"))&&(cn.cleanLink(n)!==cn.cleanLink(window.location.href)&&!e.classList.contains(this.noAjaxLinkClass)))))))}},{key:"getTransition",value:function(t,e){return this._transitionFactory.getTransition(t,e)}},{key:"onStateChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getCurrentUrl();if(this.transitionProgress&&this.forceGoTo(n),this._history.currentStatus().url===n)return!1;this.currentState="string"==typeof t||e?this._history.add(n,t,"ajax"):this._history.add(n,null,"_history"),W.commit("SB_BEFORE_PAGE_LOAD",{currentStatus:this._history.currentStatus(),prevStatus:this._history.prevStatus()});var r=this.load(n),i=this.getTransition(this._history.prevStatus(),this._history.currentStatus());this.transitionProgress=!0,W.commit("SB_TRANSITION_START",{transition:i,currentStatus:this._history.currentStatus(),prevStatus:this._history.prevStatus()});var o=i.init(this._kernel.page,r);r.then(this.onNewPageLoaded),o.then(this.onTransitionEnd)}},{key:"onNewPageLoaded",value:function(t){var e=this._history.currentStatus();this._graphicLoader&&this._graphicLoader.hide(),this._dom.updateBodyAttributes(t),this._dom.updatePageTitle(t),cn.trackGoogleAnalytics(),this.currentState&&t&&!this.currentState.data.title&&t.metaTitle&&(this.currentState.data.title=t.metaTitle),W.commit("SB_CONTAINER_READY",{currentStatus:e,prevStatus:this._history.prevStatus(),currentHTML:this._dom.currentHTML,page:t})}},{key:"onTransitionEnd",value:function(){this.transitionProgress=!1,this.linkHash&&(window.location.hash="",window.location.hash=this.linkHash,this.linkHash=null),W.commit("SB_TRANSITION_COMPLETE",{currentStatus:this._history.currentStatus(),prevStatus:this._history.prevStatus()})}},{key:"kernel",set:function(t){this._kernel=t}},{key:"history",set:function(t){this._history=t}},{key:"dom",set:function(t){this._dom=t}},{key:"cacheProvider",set:function(t){this._cacheProvider=t}},{key:"graphicLoader",set:function(t){this._graphicLoader=t}},{key:"worker",set:function(t){this._worker=t}},{key:"transitionFactory",set:function(t){this._transitionFactory=t}}]),t}(),hn=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).noPrefetchClass,n=void 0===e?"no-prefetch":e;z(this,t),this.noPrefetchClass=n,this._worker=null,this._pjax=null,this._cacheProvider=null}return G(t,[{key:"init",value:function(){if(!window.history.pushState)return!1;document.body.addEventListener("mouseover",this.onLinkEnter.bind(this)),document.body.addEventListener("touchstart",this.onLinkEnter.bind(this))}},{key:"onLinkEnter",value:function(t){for(var e=t.target;e&&!this._pjax.getHref(e);)e=e.parentNode;if(e&&!e.classList.contains(this.noPrefetchClass)){var n=this._pjax.getHref(e);if(this._pjax.preventCheck(t,e)&&this._cacheProvider&&!this._cacheProvider.get(n)){var r=cn.request(n,this._worker);this._cacheProvider&&this._cacheProvider.set(n,r)}}}},{key:"worker",set:function(t){this._worker=t}},{key:"pjax",set:function(t){this._pjax=t}},{key:"cacheProvider",set:function(t){this._cacheProvider=t}}]),t}(),fn=function(){function t(){z(this,t),this.data={}}return G(t,[{key:"exists",value:function(t){return t in this.data}},{key:"get",value:function(t){return this.data[t]}},{key:"set",value:function(t,e){return this.data[t]=e,this}},{key:"reset",value:function(){this.data={}}}]),t}(),dn=function(){function t(){z(this,t),console.debug("🌀 Construct loader")}return G(t,[{key:"show",value:function(){console.debug("🌀 Show loader")}},{key:"hide",value:function(){console.debug("🌀 Hide loader")}}]),t}(),pn=a(function(t){!function(e){var n,r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",l=e.regeneratorRuntime;if(l)t.exports=l;else{(l=e.regeneratorRuntime=t.exports).wrap=b;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={},y={};y[s]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(j([])));m&&m!==r&&o.call(m,s)&&(y=m);var w=P.prototype=_.prototype=Object.create(y);E.prototype=w.constructor=P,P.constructor=E,P[u]=E.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},l.awrap=function(t){return{__await:t}},L(x.prototype),x.prototype[c]=function(){return this},l.AsyncIterator=x,l.async=function(t,e,n,r){var i=new x(b(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},L(w),w[u]="Generator",w[s]=function(){return this},w.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function b(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=k(t,e,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function k(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function _(){}function E(){}function P(){}function L(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(t){var e;this._invoke=function(n,r){function a(){return new Promise(function(e,a){!function e(n,r,a,s){var c=k(t[n],t,r);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"===i()(l)&&o.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,a,s)},function(t){e("throw",t,a,s)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},function(t){return e("throw",t,a,s)})}s(c.arg)}(n,r,e,a)})}return e=e?e.then(a,a):a()}}function A(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,A(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=k(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function j(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this||"object"===("undefined"==typeof self?"undefined":i()(self))&&self}()||Function("return this")())}),vn=function(){return this||"object"===("undefined"==typeof self?"undefined":i()(self))&&self}()||Function("return this")(),yn=vn.regeneratorRuntime&&Object.getOwnPropertyNames(vn).indexOf("regeneratorRuntime")>=0,gn=yn&&vn.regeneratorRuntime;vn.regeneratorRuntime=void 0;var mn=pn;if(yn)vn.regeneratorRuntime=gn;else try{delete vn.regeneratorRuntime}catch(t){vn.regeneratorRuntime=void 0}var wn=mn;var bn=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}};var kn=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)};var _n=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var En=function(t){return bn(t)||kn(t)||_n()};a(function(t){!function(e){var n,r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",l=e.regeneratorRuntime;if(l)t.exports=l;else{(l=e.regeneratorRuntime=t.exports).wrap=b;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={},y={};y[s]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(j([])));m&&m!==r&&o.call(m,s)&&(y=m);var w=P.prototype=_.prototype=Object.create(y);E.prototype=w.constructor=P,P.constructor=E,P[u]=E.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},l.awrap=function(t){return{__await:t}},L(x.prototype),x.prototype[c]=function(){return this},l.AsyncIterator=x,l.async=function(t,e,n,r){var i=new x(b(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},L(w),w[u]="Generator",w[s]=function(){return this},w.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function b(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=k(t,e,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function k(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function _(){}function E(){}function P(){}function L(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(t){var e;this._invoke=function(n,r){function a(){return new Promise(function(e,a){!function e(n,r,a,s){var c=k(t[n],t,r);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"===i()(l)&&o.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,a,s)},function(t){e("throw",t,a,s)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},s)}s(c.arg)}(n,r,e,a)})}return e=e?e.then(a,a):a()}}function A(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,A(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=k(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function j(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())});function Pn(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}var Ln=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Pn(o,r,i,a,s,"next",t)}function s(t){Pn(o,r,i,a,s,"throw",t)}a(void 0)})}};function xn(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,o)},e),a&&t.apply(i,o)}}var An=function(){function t(e,n,r){z(this,t),r=r||"block",this.page=e,this.container=n,this.id=this.container.id,this.type=r,this.name=this.container.hasAttribute("data-node-name")?this.container.getAttribute("data-node-name"):"",this.onResize=this.onResize.bind(this),this.onResizeDebounce=xn(this.onResize,50,!1),console.debug("\t✳️ #"+this.id+" %c["+r+"]","color:grey"),this.init(),this.initEvents()}return G(t,[{key:"init",value:function(){}},{key:"initEvents",value:function(){window.addEventListener("resize",this.onResizeDebounce)}},{key:"destroy",value:function(){console.debug("\t🗑 #"+this.id),this.destroyEvents()}},{key:"destroyEvents",value:function(){window.removeEventListener("resize",this.onResizeDebounce)}},{key:"onResize",value:function(){}},{key:"onPageReady",value:function(){}}]),t}(),Sn=function(){function t(e,n,r,i){if(z(this,t),i=i||"page",!n)throw new Error("AbstractPage need a container (HTMLElement) to be defined.");if(!e)throw new Error("AbstractPage need a Kernel instance to be defined.");if(this.kernel=e,this.container=n,!this.container)throw new Error("AbstractPage: container not found!");if(this.id=this.container.id,!this.id)throw new Error("AbstractPage: container have no id!");this.context=r,this.type=i,this.isHome="1"===this.container.getAttribute("data-is-home"),this.lazyload=null,this.blocks=[],this.name=this.container.hasAttribute("data-node-name")?this.container.getAttribute("data-node-name"):"",this.metaTitle=this.container.hasAttribute("data-meta-title")?this.container.getAttribute("data-meta-title"):"",this.onResize=this.onResize.bind(this),this.onResizeDebounce=xn(this.onResize,50,!1),this.bindedUpdateBlocks=xn(this.updateBlocks.bind(this),50,!1),this.onLazyImageSet=this.onLazyImageSet.bind(this),this.onLazyImageLoad=this.onLazyImageLoad.bind(this),this.onLazyImageProcessed=this.onLazyImageProcessed.bind(this),console.debug("✳️ #"+this.id+" %c["+i+"] ["+this.context+"]","color:grey")}return G(t,[{key:"init",value:function(){var t=Ln(wn.mark(function t(){return wn.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.blockElements=En(this.container.querySelectorAll(".".concat(this.kernel.options.pageBlockClass))),this.blockLength=this.blockElements.length,!this.blockLength){t.next=5;break}return t.next=5,this.initBlocks();case 5:this.kernel.options.ajaxEnabled&&"ajax"===this.context&&this.initAjax(),this.kernel.options.lazyloadEnabled&&this.initLazyload(),this.initEvents();case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){if(console.debug("🗑 #"+this.id),this.container.parentNode.removeChild(this.container),this.destroyEvents(),null!==this.kernel.page&&this.kernel.page.name!==this.name&&document.body.classList.remove(this.name),null!==this.kernel.page&&this.kernel.page.type!==this.type&&document.body.classList.remove(this.type),null!==this.blocks)for(var t in this.blocks)this.blocks.hasOwnProperty(t)&&this.blocks[t].destroy();null!==this.lazyload&&(this.lazyload.destroy(),this.lazyload=null)}},{key:"initEvents",value:function(){window.addEventListener("resize",this.onResizeDebounce),this.domObserver=new window.MutationObserver(this.bindedUpdateBlocks),this.domObserver.observe(this.container,{childList:!0,attributes:!1,characterData:!1,subtree:!0})}},{key:"destroyEvents",value:function(){window.removeEventListener("resize",this.onResizeDebounce),this.domObserver.disconnect()}},{key:"initLazyload",value:function(){this.beforeLazyload()}},{key:"updateLazyload",value:function(){this.lazyload&&this.lazyload.update()}},{key:"show",value:function(t){console.debug("▶️ #"+this.id),this.container.style.opacity="1",void 0!==t&&t(),this.container.classList.remove(this.kernel.options.pageClass+"-transitioning"),W.commit("SB_AFTER_PAGE_SHOW",this)}},{key:"hide",value:function(t){W.commit("SB_BEFORE_PAGE_HIDE",this),console.debug("◀️ #"+this.id),this.container.style.opacity="0",void 0!==t&&t(),W.commit("SB_AFTER_PAGE_HIDE",this)}},{key:"initAjax",value:function(){this.container.classList.add(this.kernel.options.pageClass+"-transitioning")}},{key:"initBlocks",value:function(){var t=Ln(wn.mark(function t(){var e,n,r;return wn.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.blockLength)){t.next=9;break}return t.next=4,this.initSingleBlock(this.blockElements[e]);case 4:n=t.sent,this.blocks.push(n);case 6:e++,t.next=1;break;case 9:for(r=this.blocks.length-1;r>=0;r--)"function"==typeof this.blocks[r].onPageReady&&this.blocks[r].onPageReady();case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"updateBlocks",value:function(){var t=Ln(wn.mark(function t(){var e,n,r;return wn.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.debug("\t📯 Page DOM changed…"),this.updateLazyload(),this.blockElements=this.container.querySelectorAll(".".concat(this.kernel.options.pageBlockClass)),this.blockLength=this.blockElements.length,e=0;case 5:if(!(e<this.blockLength)){t.next=22;break}if(n=this.blockElements[e],this.getBlockById(n.id)){t.next=19;break}return t.prev=8,t.next=11,this.initSingleBlock(this.blockElements[e]);case 11:r=t.sent,this.blocks.push(r),r.onPageReady(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(8),console.info(t.t0.message);case 19:e++,t.next=5;break;case 22:case"end":return t.stop()}},t,this,[[8,16]])}));return function(){return t.apply(this,arguments)}}()},{key:"initSingleBlock",value:function(){var t=Ln(wn.mark(function t(e){var n,r;return wn.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getAttribute(this.kernel.options.objectTypeAttr),t.next=3,this.kernel.classFactory.getBlockInstance(this,e,n);case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return",new An(this,e,n));case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getBlockById",value:function(t){var e=this.getBlockIndexById(t);return this.blocks[e]?this.blocks[e]:null}},{key:"getBlockIndexById",value:function(t){for(var e in this.blocks)if(this.blocks.hasOwnProperty(e)&&this.blocks[e]&&this.blocks[e].id&&this.blocks[e].id===t)return e;return null}},{key:"getFirstBlockByType",value:function(t){var e=this.getFirstBlockIndexByType(t);return this.blocks[e]?this.blocks[e]:null}},{key:"getFirstBlockIndexByType",value:function(t){for(var e in this.blocks)if(this.blocks.hasOwnProperty(e)&&this.blocks[e]&&this.blocks[e].type&&this.blocks[e].type===t)return e;return null}},{key:"onResize",value:function(){}},{key:"beforeLazyload",value:function(){}},{key:"onLazyImageSet",value:function(t){console.debug("\t🖼 «"+t.id+"» set")}},{key:"onLazyImageLoad",value:function(t){console.debug("\t🖼 «"+t.id+"» load")}},{key:"onLazyImageProcessed",value:function(t){console.debug("\t🖼 Lazy load processed")}}]),t}(),Tn=function(){function t(){z(this,t),this.oldPage=void 0,this.newPage=void 0,this.newPageLoading=void 0}return G(t,[{key:"init",value:function(t,e){var n=this;return this.oldPage=t,this._newPagePromise=e,this.deferred=cn.deferred(),this.newPageReady=cn.deferred(),this.newPageLoading=this.newPageReady.promise,this.start(),this._newPagePromise.then(function(t){n.newPage=t,n.newPageReady.resolve()}),this.deferred.promise}},{key:"done",value:function(){this.oldPage.destroy(),this.newPage.container.style.visibility="visible",this.newPage.updateLazyload(),this.deferred.resolve()}},{key:"start",value:function(){}}]),t}(),On=J("unscopables"),jn=Array.prototype;void 0==jn[On]&&k(jn,On,{});var In=function(t){jn[On][t]=!0},Cn=function(t,e){return{value:e,done:!!t}},Rn={};k(Rn,J("iterator"),function(){return this});var Fn=function(t,e,n){t.prototype=Ye(Rn,{next:b(1,n)}),Wt(t,e+" Iterator")},Bn=function(t){return Object(X(t))},Nn=Se("IE_PROTO"),zn=Object.prototype,Mn=Object.getPrototypeOf||function(t){return t=Bn(t),E(t,Nn)?t[Nn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?zn:null},Gn=J("iterator"),Dn=!([].keys&&"next"in[].keys()),Hn=function(){return this},Un=function(t,e,n,r,i,o,a){Fn(n,e,r);var s,c,u,l=function(t){if(!Dn&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f="values"==i,d=!1,p=t.prototype,v=p[Gn]||p["@@iterator"]||i&&p[i],y=v||l(i),g=i?f?l("entries"):y:void 0,m="Array"==e&&p.entries||v;if(m&&(u=Mn(m.call(new t)))!==Object.prototype&&u.next&&(Wt(u,h,!0),"function"!=typeof u[Gn]&&k(u,Gn,Hn)),f&&v&&"values"!==v.name&&(d=!0,y=function(){return v.call(this)}),(Dn||d||!p[Gn])&&k(p,Gn,y),ut[e]=y,ut[h]=Hn,i)if(s={values:f?y:l("values"),keys:o?y:l("keys"),entries:g},a)for(c in s)c in p||A(p,c,s[c]);else j(j.P+j.F*(Dn||d),e,s);return s},qn=Un(Array,"Array",function(t,e){this._t=be(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Cn(1)):Cn(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");ut.Arguments=ut.Array,In("keys"),In("values"),In("entries");for(var Wn=J("iterator"),Vn=J("toStringTag"),Yn=ut.Array,Xn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Kn=He(Xn),Jn=0;Jn<Kn.length;Jn++){var $n,Qn=Kn[Jn],Zn=Xn[Qn],tr=s[Qn],er=tr&&tr.prototype;if(er&&(er[Wn]||k(er,Wn,Yn),er[Vn]||k(er,Vn,Qn),ut[Qn]=Yn,Zn))for($n in qn)er[$n]||A(er,$n,qn[$n],!0)}var nr=function(t){return function(e,n){var r,i,o=String(X(e)),a=vt(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}(!0);Un(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=nr(e,n),this._i+=t.length,{value:t,done:!1})});a(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"===i()(Symbol.iterator)?function(t){return i()(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i()(t)})(t)}function n(r){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},n(r)}t.exports=n});a(function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e}),a(function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e});var rr=Array.isArray||function(t){return"Array"==Z(t)},ir=J("species"),or=function(t,e){return new(function(t){var e;return rr(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!rr(e.prototype)||(e=void 0),u(e)&&null===(e=e[ir])&&(e=void 0)),void 0===e?Array:e}(t))(e)},ar=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,c=e||or;return function(e,u,l){for(var h,f,d=Bn(e),p=we(d),v=T(u,l,3),y=gt(p.length),g=0,m=n?c(e,y):r?c(e,0):void 0;y>g;g++)if((s||g in p)&&(f=v(h=p[g],g,d),t))if(n)m[g]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:m.push(h)}else if(o)return!1;return a?-1:i||o?o:m}},sr=ar(6),cr="findIndex",ur=!0;cr in[]&&Array(1)[cr](function(){ur=!1}),j(j.P+j.F*ur,"Array",{findIndex:function(t){return sr(this,t,arguments.length>1?arguments[1]:void 0)}}),In(cr),j(j.S+j.F*!f,"Object",{defineProperty:w.f});var lr=ar(5),hr=!0;"find"in[]&&Array(1).find(function(){hr=!1}),j(j.P+j.F*hr,"Array",{find:function(t){return lr(this,t,arguments.length>1?arguments[1]:void 0)}}),In("find");var fr=function(t,e,n){e in t?w.f(t,e,b(0,n)):t[e]=n};function dr(){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){window.clearTimeout(t)};for(var t,e=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,i=window.console=window.console||{};r--;)i[t=n[r]]||(i[t]=e);Array.from||(Array.from=function(t){return[].slice.call(t)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return e}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null===this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return i;i++}return-1}}),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}()}j(j.S+j.F*!Zt(function(t){}),"Array",{from:function(t){var e,n,r,i,o=Bn(t),a="function"==typeof this?this:Array,s=arguments.length,c=s>1?arguments[1]:void 0,u=void 0!==c,l=0,h=wt(o);if(u&&(c=T(c,s>2?arguments[2]:void 0,2)),void 0==h||a==Array&&ft(h))for(n=new a(e=gt(o.length));e>l;l++)fr(n,l,u?c(o[l],l):o[l]);else for(i=h.call(o),n=new a;!(r=i.next()).done;l++)fr(n,l,u?ct(i,c,[r.value,l],!0):r.value);return n.length=l,n}})},96:function(t,e,n){n(97),n(98),n(100),t.exports=n(151)}});